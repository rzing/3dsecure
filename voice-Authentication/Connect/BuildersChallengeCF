{"modules":[{"id":"df400370-06ad-463d-912c-2f704be6455e","type":"SetRecordingBehavior","branches":[{"condition":"Success","transition":"b99141c6-2f96-4fc7-a99a-27ab77622246"}],"parameters":[{"name":"RecordingBehaviorOption","value":"Enable"},{"name":"RecordingParticipantOption","value":"Both"}],"metadata":{"position":{"x":418,"y":48.222615899668256}}},{"id":"653b54a1-8dba-40af-a225-2d3cbeae6120","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"d2ea8726-b56b-43fa-aa5b-30ede7028c75"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":173,"y":414.4073978625961}}},{"id":"d2ea8726-b56b-43fa-aa5b-30ede7028c75","type":"SetAttributes","branches":[{"condition":"Success","transition":"df400370-06ad-463d-912c-2f704be6455e"},{"condition":"Error","transition":"df400370-06ad-463d-912c-2f704be6455e"}],"parameters":[{"name":"Attribute","value":"CustomerName","key":"CustomerName","namespace":"User Defined"},{"name":"Attribute","value":"CustomerId","key":"CustomerId","namespace":"User Defined"}],"metadata":{"position":{"x":174,"y":144.4073978625961}}},{"id":"642a703b-a640-4e58-9980-24163b95177c","type":"SetAttributes","branches":[{"condition":"Success","transition":"be848524-b4cb-4220-930d-af1cab222b2f"},{"condition":"Error","transition":"be848524-b4cb-4220-930d-af1cab222b2f"}],"parameters":[{"name":"Attribute","value":"messsage","key":"messsage","namespace":"External"},{"name":"Attribute","value":"balance","key":"balance","namespace":"External"},{"name":"Attribute","value":"datetime","key":"datetime","namespace":"External"}],"metadata":{"position":{"x":1515.259765625,"y":40.214748021287505}}},{"id":"be848524-b4cb-4220-930d-af1cab222b2f","type":"PlayPrompt","branches":[{"condition":"Success","transition":"17f034ea-a20d-4e48-af71-cae65bbd9600"}],"parameters":[{"name":"Text","value":"We have received response for your request as $.External.message","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1741,"y":35.4073978625961},"useDynamic":false}},{"id":"bb50dac5-8cb8-45c2-93ad-77f6eeef2f5e","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"642a703b-a640-4e58-9980-24163b95177c"},{"condition":"Error","transition":"642a703b-a640-4e58-9980-24163b95177c"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:961853145745:function:GetDataFromDb","namespace":null},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":1224.418212890625,"y":330.5800358020492},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"17f034ea-a20d-4e48-af71-cae65bbd9600","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"User Authenticated","transition":"9dbf6b7b-33a9-4f29-9162-6d985a6c4743"},{"condition":"NoMatch","transition":"bc6ae4c6-e7f0-4043-b066-60f3dc332826"}],"parameters":[{"name":"Attribute","value":"message"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1772,"y":284.4073978625961},"conditionMetadata":[{"id":"0325f8a8-1dd0-4bd0-8670-87b8e7326b17","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"User Authenticated"}]}},{"id":"abdbd95d-e573-4fe6-89c7-b7bf16e2be15","type":"SetAttributes","branches":[{"condition":"Success","transition":"bb50dac5-8cb8-45c2-93ad-77f6eeef2f5e"},{"condition":"Error","transition":"bb50dac5-8cb8-45c2-93ad-77f6eeef2f5e"}],"parameters":[{"name":"Attribute","value":"Phrase","key":"Phrase","namespace":"Lex.Slots"}],"metadata":{"position":{"x":1213.7711181640625,"y":36.51687585942227}}},{"id":"b99141c6-2f96-4fc7-a99a-27ab77622246","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e85e2d61-5ac7-4f96-8ac3-cb3082b5a157"}],"parameters":[{"name":"Text","value":"Hello  $.Attributes.CustomerName Welcome to Sky bank ATM.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":679,"y":55.4073978625961},"useDynamic":false}},{"id":"bc6ae4c6-e7f0-4043-b066-60f3dc332826","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e85e2d61-5ac7-4f96-8ac3-cb3082b5a157"}],"parameters":[{"name":"Text","value":"Authorization failed. Please share valid secret phrase.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1994,"y":572.4073978625961},"useDynamic":false}},{"id":"e85e2d61-5ac7-4f96-8ac3-cb3082b5a157","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"VoiceAuth","transition":"abdbd95d-e573-4fe6-89c7-b7bf16e2be15"},{"condition":"NoMatch","transition":"abdbd95d-e573-4fe6-89c7-b7bf16e2be15"},{"condition":"Error","transition":"abdbd95d-e573-4fe6-89c7-b7bf16e2be15"}],"parameters":[{"name":"Text","value":"How can I help you?","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"VoiceAuthentication"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":923,"y":46.4073978625961},"conditionMetadata":[{"id":"ed26a6af-1292-4421-a934-4ed53837da96","value":"VoiceAuth"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"0c28adbe-d4e5-4b76-8afd-0e1c43383bba","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"3531544f-e79d-48ce-a5b0-201ab561e1c3"},{"condition":"Error","transition":"3531544f-e79d-48ce-a5b0-201ab561e1c3"}],"parameters":[],"metadata":{"position":{"x":3180,"y":44.1717626295011},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"c0eba6b3-bb01-4164-a5b4-a7b560331a05","type":"SetQueue","branches":[{"condition":"Success","transition":"0c28adbe-d4e5-4b76-8afd-0e1c43383bba"},{"condition":"Error","transition":"0c28adbe-d4e5-4b76-8afd-0e1c43383bba"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-east-1:961853145745:instance/81d8a31c-b4d8-45cb-a59d-a374519acf54/queue/1d31501f-6a4f-4521-9c9b-67bd442b5bbd","namespace":null,"resourceName":"BuildersChallenge"}],"metadata":{"position":{"x":2935,"y":30.171762629501107},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:961853145745:instance/81d8a31c-b4d8-45cb-a59d-a374519acf54/queue/1d31501f-6a4f-4521-9c9b-67bd442b5bbd","text":"BuildersChallenge"}}},{"id":"b76c0423-7059-443d-a3a1-f20d89b680ec","type":"PlayPrompt","branches":[{"condition":"Success","transition":"117234ec-640a-4b11-a295-c276957ef0c5"}],"parameters":[{"name":"Text","value":"Your account balance on date $.External.datetime is $ $.External.balance","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2258.60595703125,"y":45.46189844243008},"useDynamic":false}},{"id":"117234ec-640a-4b11-a295-c276957ef0c5","type":"GetUserInput","branches":[{"condition":"NoMatch","transition":"c0eba6b3-bb01-4164-a5b4-a7b560331a05"},{"condition":"Error","transition":"c22a874a-4aa3-42fc-9b2b-59aa0c732819"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"TalkToAnAgent","transition":"c0eba6b3-bb01-4164-a5b4-a7b560331a05"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Hangup","transition":"c22a874a-4aa3-42fc-9b2b-59aa0c732819"}],"parameters":[{"name":"Text","value":"Would you like to talk to our agent or hangup.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"VoiceAuthentication"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":2558,"y":43.1717626295011},"conditionMetadata":[{"id":"9476de5e-e634-4e42-b8ad-3ff6f4b960c6","value":"TalkToAnAgent"},{"id":"4461c2b2-733f-42fc-9c97-19ea0f04185c","value":"Hangup"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"3531544f-e79d-48ce-a5b0-201ab561e1c3","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":3196,"y":546.1717626295011}}},{"id":"9dbf6b7b-33a9-4f29-9162-6d985a6c4743","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"BalanceCheck","transition":"b76c0423-7059-443d-a3a1-f20d89b680ec"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Hangup","transition":"c22a874a-4aa3-42fc-9b2b-59aa0c732819"},{"condition":"NoMatch","transition":"b76c0423-7059-443d-a3a1-f20d89b680ec"},{"condition":"Error","transition":"c22a874a-4aa3-42fc-9b2b-59aa0c732819"}],"parameters":[{"name":"Text","value":"How can I help you?","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"VoiceAuthentication"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":1999,"y":39.4073978625961},"conditionMetadata":[{"id":"3bdf2681-9318-4960-9c20-91ff4ef13cd2","value":"BalanceCheck"},{"id":"5785069e-af83-4cd1-9e53-482a85ee1f8d","value":"Hangup"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"c22a874a-4aa3-42fc-9b2b-59aa0c732819","type":"PlayPrompt","branches":[{"condition":"Success","transition":"3531544f-e79d-48ce-a5b0-201ab561e1c3"}],"parameters":[{"name":"Text","value":"Hope you had great experience with us. Have a nice day !","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2220,"y":346.4073978625961},"useDynamic":false}}],"version":"1","type":"contactFlow","start":"653b54a1-8dba-40af-a225-2d3cbeae6120","metadata":{"entryPointPosition":{"x":22.811448665720988,"y":412.0340178113705},"snapToGrid":false,"name":"BuildersChallengeCF","description":null,"type":"contactFlow","status":"published","hash":"7732185d460bbda695c0ebe851454a577f79c0486644cc7375268c201f53b84d"}}