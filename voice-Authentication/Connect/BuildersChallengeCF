{"modules":[{"id":"b99141c6-2f96-4fc7-a99a-27ab77622246","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e85e2d61-5ac7-4f96-8ac3-cb3082b5a157"}],"parameters":[{"name":"Text","value":"Hello  $.Attributes.CustomerName Welcome to Sky bank ATM.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":679,"y":52.639004853859056},"useDynamic":false}},{"id":"bc6ae4c6-e7f0-4043-b066-60f3dc332826","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e85e2d61-5ac7-4f96-8ac3-cb3082b5a157"}],"parameters":[{"name":"Text","value":"Authorization failed. Please share valid secret phrase.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1994,"y":569.6390048538591},"useDynamic":false}},{"id":"e85e2d61-5ac7-4f96-8ac3-cb3082b5a157","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"VoiceAuth","transition":"abdbd95d-e573-4fe6-89c7-b7bf16e2be15"},{"condition":"NoMatch","transition":"abdbd95d-e573-4fe6-89c7-b7bf16e2be15"},{"condition":"Error","transition":"abdbd95d-e573-4fe6-89c7-b7bf16e2be15"}],"parameters":[{"name":"Text","value":"How can I help you?","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"VoiceAuthentication"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":923,"y":43.639004853859056},"conditionMetadata":[{"id":"c3f793bd-af57-46e5-9a19-d8f5d8916f4f","value":"VoiceAuth"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"0c28adbe-d4e5-4b76-8afd-0e1c43383bba","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"3531544f-e79d-48ce-a5b0-201ab561e1c3"},{"condition":"Error","transition":"3531544f-e79d-48ce-a5b0-201ab561e1c3"}],"parameters":[],"metadata":{"position":{"x":3425,"y":37.23160699126296},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"c0eba6b3-bb01-4164-a5b4-a7b560331a05","type":"SetQueue","branches":[{"condition":"Success","transition":"0c28adbe-d4e5-4b76-8afd-0e1c43383bba"},{"condition":"Error","transition":"0c28adbe-d4e5-4b76-8afd-0e1c43383bba"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-east-1:961853145745:instance/81d8a31c-b4d8-45cb-a59d-a374519acf54/queue/1d31501f-6a4f-4521-9c9b-67bd442b5bbd","namespace":null,"resourceName":"BuildersChallenge"}],"metadata":{"position":{"x":3209,"y":31.231606991262954},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:961853145745:instance/81d8a31c-b4d8-45cb-a59d-a374519acf54/queue/1d31501f-6a4f-4521-9c9b-67bd442b5bbd","text":"BuildersChallenge"}}},{"id":"3531544f-e79d-48ce-a5b0-201ab561e1c3","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":3390,"y":541.231606991263}}},{"id":"c22a874a-4aa3-42fc-9b2b-59aa0c732819","type":"PlayPrompt","branches":[{"condition":"Success","transition":"3531544f-e79d-48ce-a5b0-201ab561e1c3"}],"parameters":[{"name":"Text","value":"Hope you had great experience with us. Have a nice day !","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2721,"y":337.23160699126294},"useDynamic":false}},{"id":"df400370-06ad-463d-912c-2f704be6455e","type":"SetRecordingBehavior","branches":[{"condition":"Success","transition":"b99141c6-2f96-4fc7-a99a-27ab77622246"}],"parameters":[{"name":"RecordingBehaviorOption","value":"Enable"},{"name":"RecordingParticipantOption","value":"Both"}],"metadata":{"position":{"x":418,"y":45.45422289093121}}},{"id":"653b54a1-8dba-40af-a225-2d3cbeae6120","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"d2ea8726-b56b-43fa-aa5b-30ede7028c75"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":173,"y":411.63900485385903}}},{"id":"d2ea8726-b56b-43fa-aa5b-30ede7028c75","type":"SetAttributes","branches":[{"condition":"Success","transition":"df400370-06ad-463d-912c-2f704be6455e"},{"condition":"Error","transition":"df400370-06ad-463d-912c-2f704be6455e"}],"parameters":[{"name":"Attribute","value":"CustomerName","key":"CustomerName","namespace":"User Defined"},{"name":"Attribute","value":"CustomerId","key":"CustomerId","namespace":"User Defined"}],"metadata":{"position":{"x":174,"y":141.63900485385906}}},{"id":"39b7d712-242a-4b24-a0b7-ca020bfa4347","type":"GetUserInput","branches":[{"condition":"NoMatch","transition":"07b42f83-f287-479c-8558-a56cc31344d3"},{"condition":"Error","transition":"07b42f83-f287-479c-8558-a56cc31344d3"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"OTP","transition":"07b42f83-f287-479c-8558-a56cc31344d3"}],"parameters":[{"name":"Text","value":"We have sent you an OTP on your registered mobile number. Please check.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"VoiceAuthentication"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":2158,"y":255},"conditionMetadata":[{"id":"7eaf7eb9-6e6f-4334-a75b-14b2e1d5f004","value":"OTP"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"ab151457-7a77-428d-b624-5e744f1694cb","type":"PlayPrompt","branches":[{"condition":"Success","transition":"c22a874a-4aa3-42fc-9b2b-59aa0c732819"}],"parameters":[{"name":"Text","value":"Invalid OTP","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2684.382568359375,"y":921.7551665615755},"useDynamic":false}},{"id":"3800f7d7-0061-43f8-b2ab-aeb86870dab0","type":"PlayPrompt","branches":[{"condition":"Success","transition":"9dbf6b7b-33a9-4f29-9162-6d985a6c4743"}],"parameters":[{"name":"Text","value":"OTP validated successfully.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2677.387451171875,"y":755.6206450772005},"useDynamic":false}},{"id":"07b42f83-f287-479c-8558-a56cc31344d3","type":"SetAttributes","branches":[{"condition":"Success","transition":"845273f4-834e-4604-b5f8-5024bd477f5f"},{"condition":"Error","transition":"845273f4-834e-4604-b5f8-5024bd477f5f"}],"parameters":[{"name":"Attribute","value":"otpslot","key":"otpslot","namespace":"Lex.Slots"}],"metadata":{"position":{"x":2389,"y":582}}},{"id":"845273f4-834e-4604-b5f8-5024bd477f5f","type":"CheckAttribute","branches":[{"condition":"NoMatch","transition":"ab151457-7a77-428d-b624-5e744f1694cb"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"$.Lex.Slots.otpslot","transition":"3800f7d7-0061-43f8-b2ab-aeb86870dab0"}],"parameters":[{"name":"Attribute","value":"OTP"},{"name":"Namespace","value":"User Defined"}],"metadata":{"position":{"x":2399,"y":816},"conditionMetadata":[{"id":"da153de4-8b2f-463b-b5aa-10241634773e","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"$.Lex.Slots.otpslot"}]}},{"id":"abdbd95d-e573-4fe6-89c7-b7bf16e2be15","type":"SetAttributes","branches":[{"condition":"Success","transition":"bb50dac5-8cb8-45c2-93ad-77f6eeef2f5e"},{"condition":"Error","transition":"bb50dac5-8cb8-45c2-93ad-77f6eeef2f5e"}],"parameters":[{"name":"Attribute","value":"Phrase","key":"Phrase","namespace":"Lex.Slots"}],"metadata":{"position":{"x":1213.7711181640625,"y":33.74848285068523}}},{"id":"625b7992-0a46-4291-96da-220e01c478b3","type":"SetAttributes","branches":[{"condition":"Success","transition":"39b7d712-242a-4b24-a0b7-ca020bfa4347"},{"condition":"Error","transition":"39b7d712-242a-4b24-a0b7-ca020bfa4347"}],"parameters":[{"name":"Attribute","value":"OTP","key":"OTP","namespace":"External"}],"metadata":{"position":{"x":2225,"y":21}}},{"id":"17f034ea-a20d-4e48-af71-cae65bbd9600","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"User Authenticated","transition":"33d0011d-bde6-4cca-a75b-8a2a7b32b315"},{"condition":"NoMatch","transition":"bc6ae4c6-e7f0-4043-b066-60f3dc332826"}],"parameters":[{"name":"Attribute","value":"message"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1772,"y":281.63900485385903},"conditionMetadata":[{"id":"67efa3a9-8c58-4b18-870a-b8671db42ce3","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"User Authenticated"}]}},{"id":"33d0011d-bde6-4cca-a75b-8a2a7b32b315","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"625b7992-0a46-4291-96da-220e01c478b3"},{"condition":"Error","transition":"625b7992-0a46-4291-96da-220e01c478b3"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:961853145745:function:OTPService","namespace":null},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":1983,"y":17},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"be848524-b4cb-4220-930d-af1cab222b2f","type":"PlayPrompt","branches":[{"condition":"Success","transition":"17f034ea-a20d-4e48-af71-cae65bbd9600"}],"parameters":[{"name":"Text","value":"We have received response for your request as $.External.message","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1741,"y":32.639004853859056},"useDynamic":false}},{"id":"bb50dac5-8cb8-45c2-93ad-77f6eeef2f5e","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"642a703b-a640-4e58-9980-24163b95177c"},{"condition":"Error","transition":"642a703b-a640-4e58-9980-24163b95177c"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:961853145745:function:GetDataFromDb","namespace":null},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":1224.418212890625,"y":327.81164279331216},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"642a703b-a640-4e58-9980-24163b95177c","type":"SetAttributes","branches":[{"condition":"Success","transition":"be848524-b4cb-4220-930d-af1cab222b2f"},{"condition":"Error","transition":"be848524-b4cb-4220-930d-af1cab222b2f"}],"parameters":[{"name":"Attribute","value":"messsage","key":"messsage","namespace":"External"},{"name":"Attribute","value":"balance","key":"balance","namespace":"External"},{"name":"Attribute","value":"datetime","key":"datetime","namespace":"External"},{"name":"Attribute","value":"customerNum","key":"customerNum","namespace":"External"},{"name":"Attribute","value":"Your OTP for this transaction is :","key":"messageContent","namespace":null}],"metadata":{"position":{"x":1515.259765625,"y":37.44635501255046}}},{"id":"117234ec-640a-4b11-a295-c276957ef0c5","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"TalkToAnAgent","transition":"c0eba6b3-bb01-4164-a5b4-a7b560331a05"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Hangup","transition":"c22a874a-4aa3-42fc-9b2b-59aa0c732819"},{"condition":"NoMatch","transition":"c0eba6b3-bb01-4164-a5b4-a7b560331a05"},{"condition":"Error","transition":"c22a874a-4aa3-42fc-9b2b-59aa0c732819"}],"parameters":[{"name":"Text","value":"Would you like to talk to our agent or hangup.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"VoiceAuthentication"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":2930,"y":29.231606991262954},"conditionMetadata":[{"id":"6b00143b-1aaa-4664-961c-d2228b222ce4","value":"TalkToAnAgent"},{"id":"1fe5f803-dc8c-4961-8553-5e8345c7c58a","value":"Hangup"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"9dbf6b7b-33a9-4f29-9162-6d985a6c4743","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"BalanceCheck","transition":"b76c0423-7059-443d-a3a1-f20d89b680ec"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Hangup","transition":"c22a874a-4aa3-42fc-9b2b-59aa0c732819"},{"condition":"NoMatch","transition":"b76c0423-7059-443d-a3a1-f20d89b680ec"},{"condition":"Error","transition":"c22a874a-4aa3-42fc-9b2b-59aa0c732819"}],"parameters":[{"name":"Text","value":"How can I help you?","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"VoiceAuthentication"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":2466,"y":26.231606991262954},"conditionMetadata":[{"id":"eeba3e2e-d9c9-470d-bfaf-6de091a22219","value":"BalanceCheck"},{"id":"eeb934d2-a591-4513-a01b-b13b08ee6026","value":"Hangup"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"b76c0423-7059-443d-a3a1-f20d89b680ec","type":"PlayPrompt","branches":[{"condition":"Success","transition":"117234ec-640a-4b11-a295-c276957ef0c5"}],"parameters":[{"name":"Text","value":"Your account balance on date $.External.datetime is $ $.External.balance","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2699,"y":29.231606991262954},"useDynamic":false}}],"version":"1","type":"contactFlow","start":"653b54a1-8dba-40af-a225-2d3cbeae6120","metadata":{"entryPointPosition":{"x":22.811448665720988,"y":409.26562480263345},"snapToGrid":false,"name":"BuildersChallengeCF","description":null,"type":"contactFlow","status":"published","hash":"5635b419e838657da17a318b808ff4c43c60c00bd896ac755defc9dbea387ee2"}}